\usepackage{amsmath,amssymb}
\usepackage{amsthm}
\usepackage{mathtools}

\usepackage{biblatex}
\addbibresource{sources.bib}

\usepackage{hyperref}

\usepackage{geometry}
\usepackage{graphicx}
\usepackage{float}
\usepackage{subcaption}
\usepackage{minted}
\usepackage{fancyvrb}
\usepackage{booktabs}
\usepackage{csquotes}

\usepackage{cleveref}

\usepackage{esint}
\usepackage{bm}
\usepackage{siunitx}

\usepackage{xparse}

\newcommand\numberthis{\addtocounter{equation}{1}\tag{\theequation}}

\NewDocumentCommand{\partDeriv}{o m}{
  \frac%
  {{\partial} {\IfValueT{#1}{#1}}}%
  {{\partial} {#2}}
}

\NewDocumentCommand{\Mean}{}{\mu}
\NewDocumentCommand{\StdDev}{}{\sigma}
\NewDocumentCommand{\Var}{}{{\StdDev}^{2}}
\NewDocumentCommand{\MeanV}{}{\Vb{\Mean}}
\NewDocumentCommand{\Cov}{}{\Vb{\Sigma}}

% Vector / matrix transpose
\NewDocumentCommand{\tp}{m}{{#1}^{\!\text{T}}}

% Expected value, variance and covariance
\NewDocumentCommand{\ExpectationSymb}{}{\mathbb{E}}
\NewDocumentCommand{\VarianceSymb}{}{\text{var}}
\NewDocumentCommand{\CovarianceSymb}{}{\text{cov}}
\NewDocumentCommand{\E}{s o m}
  {
    \ExpectationSymb{\IfValueT{#2}{_{#2}}}%
    \IfBooleanTF #1
      {[ {#3} ]}
      {\!\left[ {#3} \right]}
  }
\NewDocumentCommand{\V}{s o m}
  {
    \VarianceSymb{\IfValueT{#2}{_{#2}}}%
    \IfBooleanTF #1
      {[ {#3} ]}
      {\!\left[ {#3} \right]}
  }
\NewDocumentCommand{\CV}{s o m}
  {
    \CovarianceSymb{\IfValueT{#2}{_{#2}}}%
    \IfBooleanTF #1
      {[ {#3} ]}
      {\!\left[ {#3} \right]}
  }

\NewDocumentCommand{\KLSymb}{}{\text{KL}}
\NewDocumentCommand{\KL}{s m m}
  {
    \KLSymb%
    \IfBooleanTF #1
      {( {#2} \parallel {#3} )}
      {\!\left( {#2} \parallel {#3} \right)}
  }

% Conditional (in)dependence
\NewDocumentCommand{\CondIndepSymb}{}{\scalebox{1.4}{\rotatebox[y=2.5pt]{90}{\vDash}}}
\NewDocumentCommand{\CondDepSymb}{}{\scalebox{1.4}{\reflectbox{\rotatebox[y=2.5pt]{90}{\nvDash}}}}
\NewDocumentCommand{\CondIndep}{m m m}
  {
    {#1} \mathbin{{\CondIndepSymb}} {#2} \mathbin{|} {#3}
  }
\NewDocumentCommand{\CondDep}{m m m}
  {
    {#1} \mathbin{\CondDepSymb} {#2} \mathbin{|} {#3}
  }

% Bold style for vectors, matrices and nodes
\NewDocumentCommand{\Vb}{m}{\bm{\mathrm{#1}}}
\NewDocumentCommand{\Mb}{m}{\bm{\mathrm{#1}}}
\NewDocumentCommand{\Nb}{m}{\bm{\mathrm{#1}}}
